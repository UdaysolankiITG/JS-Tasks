<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <title>Calculator</title>
    <style>
      body {
        max-width: 300px;
        margin: 50px auto;
        padding: 20px;
        border: 2px solid #333;
        border-radius: 10px;
      }
      input[type="text"] {
        width: 100%;
        height: 40px;
        font-size: 1.2em;
        text-align: right;
        margin-bottom: 10px;
        padding: 5px;
        box-sizing: border-box;
      }
      button {
        width: 22%;
        height: 40px;
        font-size: 1.1em;
        margin: 1%;
      }

      h2 {
        display: flex;
        justify-content: center;
      }
    </style>
  </head>
  <body>
    <h2>Calculator</h2>
    <input type="text" id="display" disabled />
    <br />
    <button onclick="Inputnumber(7)">7</button>
    <button onclick="Inputnumber(8)">8</button>
    <button onclick="Inputnumber(9)">9</button>
    <button class="operator" onclick="InputOperator('/')">÷</button>

    <button onclick="Inputnumber(4)">4</button>
    <button onclick="Inputnumber(5)">5</button>
    <button onclick="Inputnumber(6)">6</button>
    <button class="operator" onclick="InputOperator('*')">×</button>

    <button onclick="Inputnumber(1)">1</button>
    <button onclick="Inputnumber(2)">2</button>
    <button onclick="Inputnumber(3)">3</button>
    <button class="operator" onclick="InputOperator('-')">−</button>

    <button onclick="Inputnumber(0)">0</button>
    <button onclick="Inputnumber('.')">.</button>
    <button class="clear" onclick="clearDisplay()">C</button>
    <button class="operator" onclick="InputOperator('+')">+</button>
    <div style="width: 100%">
      <button class="equal" style="width: 47%" onclick="getResult()">=</button>
      <button class="del" style="width: 47%" onclick="deletelast()">
        <i class="fa-solid fa-delete-left"></i>
      </button>
    </div>

    <script>
      const display = document.getElementById("display");

      function Inputnumber(num) {
       
        if (num === "." && display.value.includes(".")) return;
        display.value += num;
      }

      function clearDisplay() {
        display.value = "";
      }

      function InputOperator(op) {    
        const lastChar = display.value.slice(-1);
        if (["+", "-", "*", "/"].includes(lastChar)) {
         
          display.value = display.value.slice(0, -1) + op;
        } else if (display.value !== "") {
          display.value += op;
        }
      }

        function deletelast() {
        display.value = display.value.slice(0, -1);
      }
function getResult() {
  const exp = display.value;

  function isNumber(ch) {
    let n = Number(ch);
    return !Number.isNaN(n) || ch === ".";
  }

  for (let i = 1; i < exp.length; i++) {
    if (!isNumber(exp[i]) && !isNumber(exp[i - 1])) {
      display.value = "Invalid Expression";
      return;
    }
  }

  const operators = [];
  const operands = [];
  let i = 0;

  while (i < exp.length) {
    let v = exp[i];
    if (i === 0 && !isNumber(v)) {
      let num = exp.slice(i, i + 2);
      operands.push(Number(num));
      i += 2;
      continue;
    }

    if (!isNumber(v)) {
      operators.push(v);
      i++;
    } else {
      let currNumber = "";
      while (i < exp.length && isNumber(exp[i])) {
        currNumber += exp[i];
        i++;
      }
      operands.push(Number(currNumber));
    }
  }

  let res = operands[0];
  let index = 0;

  for (let j = 1; j < operands.length; j++) {
    let op = operators[index];

    if (op === "*") {
      res = res * operands[j];
    } else if (op === "+") {
      res = res + operands[j];
    } else if (op === "-") {
      res = res - operands[j];
    } else if (op === "%") {
      res = res % operands[j];
    } else if (op === "/") {
      res = res / operands[j];
    } else {
      display.value = "Invalid Expression";
      return;
    }
    index++;
  }
  if (Number.isNaN(res) || res === Infinity || res === -Infinity) {
    display.value = "Error";
    return;
  }

  display.value = res;
}
    </script>
  </body>
</html>
