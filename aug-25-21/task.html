<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
        body {
            background-color: #f2f2f2;
            padding: 40px;
        }

        .form-container {
            background-color: white;
            max-width: 500px;
            margin: auto;
            padding: 30px 40px;
            border-radius: 8px;
        }

        h2 {
            text-align: center;
            color: #333;
        }

        label {
            display: block;
            margin-top: 15px;
            font-weight: bold;
        }

        input,
        select,
        textarea {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }

        button {
            background-color: #4CAF50;
            color: white;
            padding: 12px;
            margin-top: 20px;
            border: none;
            border-radius: 4px;
            width: 100%;
            font-size: 16px;
            cursor: pointer;
        }

        button:hover {
            background-color: #45a049;
        }

        .error {
            color: red;
            font-size: 13px;
        }

        .receipt {
            margin-top: 30px;
            padding: 20px;
            background: #fff;
            border-radius: 6px;
            max-width: 500px;
            margin: auto;
        }

        .receipt h3 {
            border-bottom: 1px solid #ccc;
            padding-bottom: 10px;
        }

        .additional-product {
            margin-top: 20px;
            padding: 0px;
        }

        #receiptcontainer {
            padding: 15px;
        }
    </style>
</head>

<body>

    <div class="form-container">
        <h2>Product Order Form</h2>
        <form id="orderForm">
            <label for="fname">Name:</label>
            <input type="text" id="fname" name="name">
            <p class="error" id="nameError"></p>

            <label for="email">Email:</label>
            <input type="text" id="email" name="email">
            <p class="error" id="emailError"></p>

            <label for="phone">Phone Number:</label>
            <input type="text" id="phone" name="phone">
            <p class="error" id="phoneError"></p>

            <label for="address">Address:</label>
            <textarea id="address" name="address" rows="3"></textarea>
            <p class="error" id="addressError"></p>

            <div id="productContainer">
                <label for="product">Select Product:</label>
                <select class="product" name="product[]">
                    <option value="">-- Choose a product --</option>
                    <option value="T-Shirt">T-Shirt - ₹400</option>
                    <option value="Hoodie">Hoodie - ₹900</option>
                    <option value="Cap">Cap - ₹200</option>
                    <option value="Shoes">Shoes - ₹1200</option>
                    <option value="Bag">Bag - ₹700</option>
                </select>
                <label for="quantity">Quantity:</label>
                <input type="number" class="quantity" value="1">
            </div>

            <button type="button" id="addProductBtn">Add Another Product</button>

            <button type="submit">Place Order</button>
        </form>


    </div>
    <div id="receiptcontainer"></div>
    <script>
        const productPrices = {
            "T-Shirt": 400,
            "Hoodie": 900,
            "Cap": 200,
            "Shoes": 1200,
            "Bag": 700
        };

        document.getElementById("addProductBtn").addEventListener("click", function () {
            const productContainer = document.getElementById("productContainer");
            const newProductDiv = document.createElement("div");
            newProductDiv.classList.add("additional-product");

            newProductDiv.innerHTML = `
                <label for="product">Select Product:</label>
                <select class="product" name="product[]">
                    <option value="">-- Choose a product --</option>
                    <option value="T-Shirt">T-Shirt - ₹400</option>
                    <option value="Hoodie">Hoodie - ₹900</option>
                    <option value="Cap">Cap - ₹200</option>
                    <option value="Shoes">Shoes - ₹1200</option>
                    <option value="Bag">Bag - ₹700</option>
                </select>
                <label for="quantity">Quantity:</label>
                <input type="number" class="quantity"   value="1">
            `;

            productContainer.appendChild(newProductDiv);
        });

        document.getElementById("orderForm").addEventListener("submit", function (e) {
            e.preventDefault();
            document.querySelectorAll(".error").forEach(function (el) {
                el.textContent = "";
            });

            const name = document.getElementById("fname").value.trim();
            const email = document.getElementById("email").value.trim();
            const phone = document.getElementById("phone").value.trim();
            const address = document.getElementById("address").value.trim();
            const products = document.querySelectorAll(".product");
            const quantities = document.querySelectorAll(".quantity");

            let isValid = true;
            let total = 0;
            let productDetails = "";

            if (name.length < 4) {
                document.getElementById("nameError").textContent = "Please enter at least 4 characters.";
                isValid = false;
            }

         if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                document.getElementById("emailError").textContent = "Please enter a valid email.";
                isValid = false;
            }

            if (!/^\d{10}$/.test(phone)) {
                document.getElementById("phoneError").textContent = "Enter a 10-digit phone number.";
                isValid = false;
            }
            let totalBill = 0;
            if (isValid) {

                for (let i = 0; i < products.length; i++) {
                    const product = products[i].value;
                    console.log(product);
                    const quantity = parseInt(quantities[i].value);

                    if (product && quantity >= 1) {
                        const productPrice = productPrices[product];
                        console.log(productPrices[product]);
                        const productTotal = productPrice * quantity;
                        totalBill += productTotal;

                        productDetails += `<p>Product: ${product}, Quantity: ${quantity}, Total: ₹${productTotal}</p>`;
                    }
                    const receiptc = document.getElementById("receiptcontainer");
                    const receiptdiv = document.createElement("div");
                    receiptdiv.classList.add("receipt");
                    receiptdiv.innerHTML = `
               <h3>Order Receipt</h3>
              <p>Date: <span >${new Date().toLocaleString()}</span></p>
              <p>Name: <span>${name}</span></p>
              <p>Email: <span>${email}</span></p>
              <p>Phone: <span >${phone}</span></p>
              <p>Address: <span >${address}</span></p>
              <div >${productDetails}</div>
              <p>Total: ₹<span>${totalBill}</span></p>
            `;

                    receiptc.appendChild(receiptdiv);
                }
                let arrobj = [{
                    date: new Date().toLocaleString(),
                    Customer: name,
                    Mail: email,
                    Phone: phone,
                    address: address,
                    details: productDetails,
                    total: totalBill,
                }]
                console.log(arrobj);
                let record = JSON.stringify(arrobj);
                localStorage.setItem(`${name}`, record)
                window.location.href = "/aug-25-21/index.html"
            }
        });
    </script>

</body>

</html>