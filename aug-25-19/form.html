<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Signup Form</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f2f2f2;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        #signupForm {
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 300px;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-size: 14px;
        }

        input[type="text"] {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .error {
            color: red;
            font-size: 12px;
            margin: 5px 0;
        }

        button {
            width: 100%;
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 10px;
        }

        button:hover {
            background-color: #45a049;
        }
    </style>
</head>

<body>

    <form id="signupForm">
        <h1>Signup</h1>

        <label>
            Name:
            <input type="text" name="name">
            <div class="error" id="nameError"></div>
        </label>

        <label>
            Email:
            <input type="text" name="email">
            <div class="error" id="emailError"></div>
        </label>

        <label>
            Password:
            <input type="text" name="password">
            <div class="error" id="passwordError"></div>
        </label>

        <label>
            Confirm Password:
            <input type="text" name="confirmPassword">
            <div class="error" id="confirmPasswordError"></div>
        </label>

        <button type="submit">Signup</button>
    </form>

    <script>
        const form = document.getElementById("signupForm");
        const inputs = form.querySelectorAll("input");
        const data = {};

        // Helper functions
        const isUpper = (char) => char >= 'A' && char <= 'Z';
        const isLower = (char) => char >= 'a' && char <= 'z';
        const isDigit = (char) => char >= '0' && char <= '9';

        // Check if the string starts with a letter
        function startsWithLetter(str) {
            const first = str[0];
            return isUpper(first) || isLower(first);
        }

        // Basic email validation
        function isValidEmail(email) {
            const atIndex = email.indexOf('@');
            return atIndex > 1 && email.includes('.') && email.slice(atIndex + 1).length > 1;
        }

        // Show error message
        function showError(name, message) {
            document.getElementById(name + "Error").innerText = message;
        }

        // Clear error message
        function clearError(name) {
            document.getElementById(name + "Error").innerText = "";
        }

        // Validate name
        function validateName(name) {
            clearError("name");
            name = name.trim();

            if (name.length === 0) return false;
            if (name.length < 2) {
                showError("name", "Name is too short");
                return false;
            }
            if (!startsWithLetter(name)) {
                showError("name", "Name must start with a letter");
                return false;
            }
            return true;
        }

        // Validate email
        function validateEmail(email) {
            clearError("email");
            if (email.trim().length === 0) return false;
            if (!isValidEmail(email)) {
                showError("email", "Invalid email address");
                return false;
            }
            return true;
        }

        // Validate password
        function validatePassword(password) {
            clearError("password");
            if (password.length === 0) return false;

            let hasUpper = false;
            let hasLower = false;
            let hasNumber = false;

            for (let char of password) {
                if (isUpper(char)) hasUpper = true;
                if (isLower(char)) hasLower = true;
                if (isDigit(char)) hasNumber = true;
            }

            if (password.length < 8 || !hasUpper || !hasLower || !hasNumber) {
                showError("password", "Password must be 8+ characters with upper, lower, and number");
                return false;
            }
            return true;
        }

        // Validate confirm password
        function validateConfirmPassword(confirm, password) {
            clearError("confirmPassword");

            if (confirm.length === 0) return false;
            if (!validatePassword(confirm)) return false;
            if (confirm !== password) {
                showError("confirmPassword", "Passwords do not match");
                return false;
            }
            return true;
        }

        // Real-time validation on each field
        inputs.forEach(input => {
            input.addEventListener("change", () => {
                const name = input.name;
                const value = input.value;

                if (name === "name" && validateName(value)) data[name] = value;
                else if (name === "email" && validateEmail(value)) data[name] = value;
                else if (name === "password" && validatePassword(value)) data[name] = value;
                else if (name === "confirmPassword" && validateConfirmPassword(value, form.password.value)) {
                    data[name] = value;
                }
            });
        });

        // On form submit
        form.addEventListener("submit", function (e) {
            e.preventDefault();

            let allValid = true;

            inputs.forEach(input => {
                const name = input.name;
                const value = input.value.trim();

                if (value === "") {
                    showError(name, "This field is required");
                    allValid = false;
                    return;
                }

                if (name === "name" && !validateName(value)) allValid = false;
                if (name === "email" && !validateEmail(value)) allValid = false;
                if (name === "password" && !validatePassword(value)) allValid = false;
                if (name === "confirmPassword" && !validateConfirmPassword(value, form.password.value)) {
                    allValid = false;
                }

                if (allValid) {
                    data[name] = value;
                }
            });

            if (allValid) {
                console.log("Signup Successful!", data);
                alert("Signup Successful!");
                form.reset(); // Clear form
            }
        });
    </script>

</body>

</html>
